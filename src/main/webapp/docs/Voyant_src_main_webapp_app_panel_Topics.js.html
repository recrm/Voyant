

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: Voyant/src/main/webapp/app/panel/Topics.js | Voyant Tools Help</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px; height: 150px">
        
            <img src="imgs/info/about/icon.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Voyant Tools Help</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="examples-tab">
                <a href="#"><h4>Voyant</h4></a>
            </li>            <li id="api-tab">
                <a href="#"><h4>Spyral</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Voyant</h3><ul><li><a href="tutorial-guides.html">Guides</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="guides_sub"><div class="member-type">Guides</div><ul class="inner"><li><a href="tutorial-start.html">Getting Started</a></li><li><a href="tutorial-corpuscreator.html">Creating a Corpus</a></li><li><a href="tutorial-modifyingcorpus.html">Modifying a Corpus</a></li><li><a href="tutorial-embedding.html">Embedding Voyant</a></li><li><a href="tutorial-skins.html">Skins</a></li><li><a href="tutorial-languages.html">Languages</a></li><li><a href="tutorial-stopwords.html">Stopwords</a></li><li><a href="tutorial-categories.html">Categories</a></li><li><a href="tutorial-search.html">Search</a></li><li><a href="tutorial-palette.html">Palette</a></li><li><a href="tutorial-grids.html">Grids</a></li><li><a href="tutorial-new.html">What's New</a></li><li><a href="tutorial-tutorial.html">Tutorial/Workshop</a></li></ul></div></li><li><a href="tutorial-info.html">Information</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="info_sub"><div class="member-type">Guides</div><ul class="inner"><li><a href="tutorial-about.html">About</a></li><li><a href="tutorial-notebook.html">About Spyral</a></li><li><a href="tutorial-gallery.html">Gallery</a></li><li><a href="tutorial-mirrors.html">Mirrors</a></li><li><a href="tutorial-server.html">VoyantServer</a></li></ul></div></li><li><a href="tutorial-tools_.html">Tools</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tools_sub"><div class="member-type">Guides</div><ul class="inner"><li><a href="tutorial-bubblelines_.html">Bubblelines</a></li><li><a href="tutorial-bubbles_.html">Bubbles</a></li><li><a href="tutorial-catalogue.html">Catalogue</a></li><li><a href="tutorial-cirrus_.html">Cirrus</a></li><li><a href="tutorial-corpuscollocates_.html">Corpus Collocates</a></li><li><a href="tutorial-collocatesgraph_.html">Collocates Graph</a></li><li><a href="tutorial-contexts_.html">Contexts</a></li><li><a href="tutorial-corpusterms_.html">Corpus Terms</a></li><li><a href="tutorial-correlations_.html">Correlations</a></li><li><a href="tutorial-documents_.html">Documents</a></li><li><a href="tutorial-documentterms_.html">Document Terms</a></li><li><a href="tutorial-dreamscape.html">Dreamscape</a></li><li><a href="tutorial-knots_.html">Knots</a></li><li><a href="tutorial-mandala_.html">Mandala</a></li><li><a href="tutorial-microsearch_.html">MicroSearch</a></li><li><a href="tutorial-phrases_.html">Phrases</a></li><li><a href="tutorial-reader_.html">Reader</a></li><li><a href="tutorial-rezoviz_.html">RezoViz</a></li><li><a href="tutorial-scatterplot_.html">ScatterPlot</a></li><li><a href="tutorial-streamgraph_.html">StreamGraph</a></li><li><a href="tutorial-summary_.html">Summary</a></li><li><a href="tutorial-termsberry_.html">TermsBerry</a></li><li><a href="tutorial-termsradio_.html">TermsRadio</a></li><li><a href="tutorial-textualarc_.html">TextualArc</a></li><li><a href="tutorial-topics_.html">Topics</a></li><li><a href="tutorial-trends_.html">Trends</a></li><li><a href="tutorial-veliza.html">Veliza</a></li><li><a href="tutorial-wordtree_.html">WordTree</a></li><li><a href="tutorial-via.html">Via</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="Spyral.html">Spyral</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Spyral.Categories.html">Categories</a></li><li><a href="Spyral.Chart.html">Chart</a></li><li><a href="Spyral.Corpus.html">Corpus</a></li><li><a href="Spyral.Load.html">Load</a></li><li><a href="Spyral.Metadata.html">Metadata</a></li><li><a href="Spyral.NetworkGraph.html">NetworkGraph</a></li><li><a href="Spyral.Notebook.html">Notebook</a></li><li><a href="Spyral.Table.html">Table</a></li><li><a href="Spyral.Util.html">Util</a></li></ul></div></li><li><a href="Tools.html">Tools</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tools_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Tools.Bubblelines.html">Bubblelines</a></li><li><a href="Tools.Bubbles.html">Bubbles</a></li><li><a href="Tools.Cirrus.html">Cirrus</a></li><li><a href="Tools.CollocatesGraph.html">CollocatesGraph</a></li><li><a href="Tools.Contexts.html">Contexts</a></li><li><a href="Tools.CorpusCollocates.html">CorpusCollocates</a></li><li><a href="Tools.CorpusTerms.html">CorpusTerms</a></li><li><a href="Tools.Correlations.html">Correlations</a></li><li><a href="Tools.DocumentTerms.html">DocumentTerms</a></li><li><a href="Tools.Documents.html">Documents</a></li><li><a href="Tools.Embedder.html">Embedder</a></li><li><a href="Tools.Knots.html">Knots</a></li><li><a href="Tools.Mandala.html">Mandala</a></li><li><a href="Tools.MicroSearch.html">MicroSearch</a></li><li><a href="Tools.Phrases.html">Phrases</a></li><li><a href="Tools.Reader.html">Reader</a></li><li><a href="Tools.RezoViz.html">RezoViz</a></li><li><a href="Tools.ScatterPlot.html">ScatterPlot</a></li><li><a href="Tools.StreamGraph.html">StreamGraph</a></li><li><a href="Tools.Summary.html">Summary</a></li><li><a href="Tools.TermsBerry.html">TermsBerry</a></li><li><a href="Tools.TermsRadio.html">TermsRadio</a></li><li><a href="Tools.TextualArc.html">TextualArc</a></li><li><a href="Tools.Topics.html">Topics</a></li><li><a href="Tools.Trends.html">Trends</a></li><li><a href="Tools.WordTree.html">WordTree</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="CustomSet.html">CustomSet</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CustomSet_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="CustomSet.html#.layout">layout</a></li><li><a href="CustomSet.html#.tableLayout">tableLayout</a></li></ul></div></li><li><a href="Panel.html">Panel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Panel_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Panel.html#.corpus">corpus</a></li><li><a href="Panel.html#.input">input</a></li><li><a href="Panel.html#.inputFormat">inputFormat</a></li><li><a href="Panel.html#.subtitle">subtitle</a></li></ul></div></li><li><a href="Spyral.Util.Storage.html">Storage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Spyral.Util.Storage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Spyral.Util.Storage.html#.getStoredResource">getStoredResource</a></li><li><a href="Spyral.Util.Storage.html#.getTromboneUrl">getTromboneUrl</a></li><li><a href="Spyral.Util.Storage.html#.storeResource">storeResource</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Spyral.Util.Storage.html#.getStoredResource">getStoredResource</a></li><li><a href="Spyral.Util.Storage.html#.getTromboneUrl">getTromboneUrl</a></li><li><a href="Spyral.Util.Storage.html#.storeResource">storeResource</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * The Topics tool provides a rudimentary way of generating term clusters from a document or corpus and then seeing how each topic (term cluster) is distributed across the document or corpus.
 * 
 * @class Topics
 * @memberof Tools
 */
Ext.define('Voyant.panel.Topics', {
	extend: 'Ext.panel.Panel',
	mixins: ['Voyant.panel.Panel'],
	alias: 'widget.topics',
	statics: {
		i18n: {
			topics: 'Topics',
			documents: 'Documents',
			topicWeight: 'Topic weight'
		},
		api: {
			/**
			 * @memberof Topics
			 * @property {StopList}
			 * @default
			 */
			stopList: 'auto',

			/**
			 * @memberof Topics
			 * @property {Number} topics The number of topics.
			 * @default
			 */
			topics: 10,

			/**
			 * @memberof Topics
			 * @property {Number} termsPerTopic The number of terms per topic.
			 * @default
			 */
			termsPerTopic: 10,

			/**
			 * @memberof Topics
			 * @property {Number} iterations The number of iterations.
			 * @default
			 */
			iterations: 100,

			/**
			 * @memberof Topics
			 * @property {Number} perDocLimit The number of terms to limit each document to.
			 * @default
			 */
			perDocLimit: 1000,

			/**
			 * @memberof Topics
			 * @property {Number} seed The seed to use for random number generation.
			 * @default
			 */
			seed: 0
		},
		glyph: 'xf1ea@FontAwesome'
	},
	config: {
		/**
		 * @private
		 */
		options: [{xtype: 'stoplistoption'},{
			xtype: 'numberfield',
			name: 'perDocLimit',
			fieldLabel: 'maximum words per document',
			labelAlign: 'right',
			value: 1000,
			minValue: 1,
			step: 100,
			listeners: {
				afterrender: function(field) {
					var win = field.up("window");
					if (win &amp;&amp; win.panel) {
						field.setValue(parseInt(win.panel.getApiParam('perDocLimit')))
						field.setFieldLabel(win.panel.localize("perDocLimit"))
					}
				},
				change: function(field, val) {
					var win = field.up("window");
					if (val>5000 &amp;&amp; win &amp;&amp; win.panel) {
						win.panel.toastInfo({
							html: win.panel.localize("perDocLimitHigh"),
							anchor: win.getTargetEl(),
							align: 'tr',
							maxWidth: 400
						})
					}
				}
			}
		},{
			xtype: 'numberfield',
			name: 'iterations',
			fieldLabel: 'iterations per run',
			labelAlign: 'right',
			value: 100,
			minValue: 50,
			maxValue: 1000,
			step: 50,
			listeners: {
				afterrender: function(field) {
					var win = field.up("window");
					if (win &amp;&amp; win.panel) {
						field.setValue(parseInt(win.panel.getApiParam('iterations')))
						field.setFieldLabel(win.panel.localize("iterations"))
					}
				}
			}
		},{
			xtype: 'textfield',
			name: 'seed',
			fieldLabel: 'Random Seed',
			labelAlign: 'right',
			value: 0
		}],
		
		currentTopics: [],
		currentDocument: undefined,

		corpus: undefined
	},
	
	constructor: function(config) {
		var me = this;
		Ext.apply(this, {
			title: this.localize('title'),
			layout: {
				type: 'hbox',
				pack: 'start',
				align: 'begin',
				padding: '10px'
			},
			defaultType: 'dataview',
			items: [{
				itemId: 'topicsView',
				flex: 2,
				padding: '0 5px 0 0',
				margin: '0 5px 0 0',
				height: '100%',
				scrollable: 'y',
				store: Ext.create('Ext.data.ArrayStore',{
					fields: ['index', 'terms', 'weight', 'diagnostics']
				}),
				selectionModel: {
					type: 'dataviewmodel',
					mode: 'MULTI'
				},
				itemSelector: 'div.topicItem',
				tpl: new Ext.XTemplate(
					'&lt;div style="font-weight: bold">{[this.localize("topics")]}&lt;/div>&lt;tpl for=".">',
						'&lt;div class="topicItem" style="background-color: {[this.getColor(values.index)]}">',
							'&lt;div class="data weight" data-qtip="{[this.localize("topicWeight")]}">{[fm.number(values.weight*100, "00.0")]}%&lt;/div>',
							'&lt;span class="term">{[values.terms.join("&lt;/span> &lt;span class=\\"term\\">")]}&lt;/span>',
							'&lt;div class="data diagnostics">{[this.processDiagnostics(values.diagnostics)]}&lt;/div>',
						'&lt;/div>',
					'&lt;/tpl>',
					{
						getColor: function(index) {
							var rgb = me.getColorForTopic(index);
							return 'rgba('+rgb.join(',')+',.33);'
						},
						localize: function(key) {
							return me.localize(key);
						},
						processDiagnostics: function(obj) {
							var string = '';
							for (var key in obj) {
								string += '&lt;div>&lt;div class="key">'+key+'&lt;/div>&lt;div class="value">'+obj[key]+'&lt;/div>&lt;/div>';
							}
							return string;
						}
					}
				),
				listeners: {
					selectionchange: function(sel, selected) {
						sel.view.removeCls('showWeight');
						me.setCurrentDocument(undefined);
						me.setCurrentTopics(selected.map(function(item) { return item.get('index') }));

						me.down('#docsView').getSelectionModel().deselectAll(true);
						me.down('#docsView').refresh();
					}
				}
			},{
				itemId: 'docsView',
				flex: 1,
				height: '100%',
				scrollable: 'y',
				store: Ext.create('Ext.data.JsonStore',{
					fields: ['docId', 'weights']
				}),
				selectionModel: {
					type: 'dataviewmodel',
					mode: 'SINGLE',
					allowDeselect: true,
					toggleOnClick: true
				},
				itemSelector: 'div.topicItem',
				tpl: new Ext.XTemplate(
					'&lt;div style="font-weight: bold">{[this.localize("documents")]}&lt;/div>&lt;tpl for=".">',
						'&lt;div class="topicItem">',
							'{[this.getDocTitle(values.docId)]}',
							'&lt;div class="chart">{[this.getChart(values.docId, values.weights)]}&lt;/div>',
						'&lt;/div>',
					'&lt;/tpl>',
					{
						getDocTitle: function(docId) {
							return me.getCorpus().getDocument(docId).getTitle();
						},
						getChart: function(docId, weights) {
							var chart = '';
							var topicStore = me.down('#topicsView').getStore();
							topicStore.each(function(item) {
								var index = item.get('index');
								var weight = weights[index];
								var rgb = me.getColorForTopic(index);
								var alpha = me.getCurrentDocument() === docId ? '1' : me.getCurrentTopics().length === 0 ? '.33' : me.getCurrentTopics().indexOf(index) !== -1 ? '1' : '.15';
								var color = 'rgba('+rgb.join(',')+','+alpha+')';
								chart += '&lt;div style="width: '+(weight*100)+'%; background-color: '+color+'"> &lt;/div>';
							});
							return chart;
						},
						localize: function(key) {
							return me.localize(key);
						}
					}
				),
				listeners: {
					selectionchange: function(sel, selected) {
						me.setCurrentTopics([]);
						
						var docId = selected[0] ? selected[0].get('docId') : undefined;
						me.setCurrentDocument(docId);
						
						var topicStore = me.down('#topicsView').getStore();
						if (docId) {
							me.down('#topicsView').addCls('showWeight').getSelectionModel().deselectAll(true);
							topicStore.beginUpdate();
							sel.view.getStore().query('docId', docId).each(function(item) {
								var weights = item.get('weights');
								weights.forEach(function(weight, index) {
									topicStore.findRecord('index', index).set('weight', weight);
								});
							});
							topicStore.endUpdate();
							topicStore.sort('weight', 'DESC');
						} else {
							me.down('#topicsView').removeCls('showWeight').getSelectionModel().deselectAll(true);
							topicStore.sort('index', 'ASC');
						}

						sel.view.refresh();
					}
				}
					
			}],
			dockedItems: {
				dock: 'bottom',
				xtype: 'toolbar',
				overflowHandler: 'scroller',
				items:[
					   '&lt;span class="info-tip" data-qtip="'+this.localize('searchTip')+'">'+this.localize('search')+'&lt;/span>'
					,{
					xtype: 'textfield',
					name: 'searchField',
					hideLabel: true,
					width: 80,
					listeners: {
						change: {
							fn: me.onQuery,
							scope: me,
							buffer: 500
						}
					}
				},
					'&lt;span class="info-tip" data-qtip="'+this.localize('limitTermsTip')+'">'+this.localize('limitTerms')+'&lt;/span>'
				,{ 
					width: 60,
					hideLabel: true,
					xtype: 'numberfield',
					minValue: 1,
					maxValue: 100,
					listeners: {
						afterrender: function(slider) {
							slider.setValue(parseInt(this.getApiParam("termsPerTopic")))
						},
						change: function(slider, newvalue) {
							this.setApiParams({termsPerTopic: newvalue});
						},
						scope: this
					}
				},
					'&lt;span class="info-tip" data-qtip="'+this.localize('numTopicsTip')+'">'+this.localize('numTopics')+'&lt;/span>'
				,{ 
					width: 60,
					hideLabel: true,
					xtype: 'numberfield',
					minValue: 1,
					maxValue: 100,
					listeners: {
						afterrender: function(slider) {
							slider.setValue(parseInt(this.getApiParam("topics")))
						},
						change: function(slider, newvalue) {
							this.setApiParams({topics: newvalue});
						},
						scope: this
					}
				},{
					text: 'Run',//new Ext.Template(this.localize('runIterations')).apply([100]),
					itemId: 'iterations',
					glyph: 'xf04b@FontAwesome',
					tooltip: this.localize('runIterationsTip'),
					handler: this.runIterations,
					scope: this
				},{
					text: 'Toggle diagnostics',
					itemId: 'diagnostics',
					glyph: 'xf129@FontAwesome',
					handler: function(btn) {
						me.down('#topicsView').toggleCls('showDiagnostics');
					}
				}]
			}
		});

		this.callParent(arguments);
		

		this.mixins['Voyant.panel.Panel'].constructor.apply(this, arguments);
		
		// create a listener for corpus loading (defined here, in case we need to load it next)
		this.on('loadedCorpus', function(src, corpus) {
			this.setCorpus(corpus);
			if (this.rendered) {
				this.initialize();
			}
			else {
				this.on("afterrender", function() {
					this.initialize();
				}, this)
			}

		});
	},
	
	runIterations: function() {
		var params = this.getApiParams();
		params.tool = 'analysis.TopicModeling';
		params.corpus = this.getCorpus().getAliasOrId();
		params.noCache = 1;

		var iterations = this.getApiParam('iterations');
		var msg = Ext.MessageBox.progress({
			title: this.localize("runningIterations"),
			message: new Ext.Template(this.localize('runningIterationsCount')).apply([iterations])
		});

		Ext.Ajax.request({
			url: this.getTromboneUrl(),
			params: params,
			success: function(response, req) {
				msg.close();

				var data = JSON.parse(response.responseText);
				
				var topicsStore = this.down('#topicsView').getStore();
				topicsStore.loadData(data.topicModeling.topics.map(function(topic, i) {
					var words = topic.words.map(function(w) {
						return w.word;
					});
					var diagnostics = Object.assign({}, topic);
					delete diagnostics.words;
					return [i, words, 0, diagnostics];
				}));

				data.topicModeling.topicDocuments.sort(function(a, b) {
					var docIndexA = this.getCorpus().getDocument(a.docId).getIndex();
					var docIndexB = this.getCorpus().getDocument(b.docId).getIndex();
					return docIndexA-docIndexB;
				}.bind(this));
				this.down('#docsView').getStore().loadData(data.topicModeling.topicDocuments);
				this.down('#docsView').refresh();
			},
			scope: this
		});
	},

	getColorForTopic: function(topicIndex) {
		return this.getApplication().getColor(topicIndex);
	},

	onQuery: function(cmp, query) {
		var topicsView = this.down('#topicsView');
		topicsView.getEl().query('.highlighted').forEach(function(hi) {
			hi.classList.remove('highlighted');
		});
		
		if (query.trim() !== '') {
			var matcher = new RegExp(query, 'gi');
			var topicsStore = topicsView.getStore();
			var indexes = [];
			var matches = [];
			topicsStore.each(function(record) {
				var terms = record.get('terms');
				var termMatches = [];
				for (var i = 0; i &lt; terms.length; i++) {
					var term = terms[i];
					if (term.search(matcher) !== -1) {
						termMatches.push(i);
					}
				}
				if (termMatches.length > 0) {
					indexes.push(record.get('index'));
				}
				matches.push(termMatches);
			});
			if (indexes.length > 0) {
				topicsView.setSelection(indexes.map(function(index) {return topicsStore.findRecord('index', index)}));
				topicsView.getNodes().forEach(function(node, i) {
					var nodeMatches = matches[i];
					if (nodeMatches.length > 0) {
						var terms = node.querySelectorAll('.term');
						nodeMatches.forEach(function(termIndex) {
							terms[termIndex].classList.add('highlighted');
						})
					}
				});
			} else {
				this.setCurrentTopics([]);
				topicsView.getSelectionModel().deselectAll(true);
				this.down('#docsView').refresh();
			}
		} else {
			this.setCurrentTopics([]);
			topicsView.getSelectionModel().deselectAll(true);
			this.down('#docsView').refresh();
		}
	},
	
	initialize: function() {
		this.runIterations();
	},

	getExtraDataExportItems: function() {
		return [{
			name: 'export',
			inputValue: 'dataAsTsv',
			boxLabel: this.localize('exportGridCurrentTsv')
		}]
	},

	exportDataAsTsv: function(panel, form) {
		var topicsValue = "Topic\t";
		var docsValue = 'Document Title';

		var topicOrder = [];

		var includeDiagnostics = this.down('#topicsView').hasCls('showDiagnostics');

		this.down('#topicsView').getStore().getData().each(function(record, i) {
			if (i === 0) {
				topicsValue += record.get('terms').map(function(t, i) { return 'Term '+i; }).join("\t");
				if (includeDiagnostics) {
					topicsValue += "\t"+Object.keys(record.get('diagnostics')).join("\t");
				}
			}
			
			topicOrder.push(record.get('index'));

			topicsValue += "\nTopic "+record.get('index')+"\t"+record.get('terms').join("\t");
			if (includeDiagnostics) {
				topicsValue += "\t"+Object.values(record.get('diagnostics')).join("\t");
			}
			docsValue += "\tTopic "+record.get('index')+' Weight';
		});

		this.down('#docsView').getStore().getData().each(function(record) {
			var title = this.getCorpus().getDocument(record.get('docId')).getTitle();
			
			var weights = topicOrder.map(function(topicIndex) {
				var weight = record.get('weights')[topicIndex];
				return Ext.util.Format.number(weight*100, "00.######");
			}).join("\t");

			docsValue += "\n"+title+"\t"+weights;
		}, this);

		Ext.create('Ext.window.Window', {
			title: panel.localize('exportDataTitle'),
			height: 290,
			width: 450,
			bodyPadding: 10,
			layout: {
				type: 'vbox',
				pack: 'start',
				align: 'stretch'
			},
			modal: true,
			defaults: {
				margin: '0 0 5px 0'
			},
			items: [{
				html: panel.localize('exportDataTsvMessage')
			},{
				html: '&lt;textarea class="x-form-text-default x-form-textarea" style="height: 76px; width: 100%">'+topicsValue+'&lt;/textarea>'
			},{
				html: '&lt;textarea class="x-form-text-default x-form-textarea" style="height: 76px; width: 100%">'+docsValue+'&lt;/textarea>'
			}],
			buttonAlign: 'center',
			buttons: [{
				text: 'OK',
				handler: function(btn) {
					btn.up('window').close();
				}
			}]
		}).show();
	}
	
});</code></pre>
        </article>
    </section>




</div>

<footer>
    <div class="footer-text"><a href='https://creativecommons.org/licenses/by/4.0/' style='text-decoration: none; color: black;'>© Stéfan Sinclair & Geoffrey Rockwell</a></div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbExamples();
    </script>

</body>
</html>
